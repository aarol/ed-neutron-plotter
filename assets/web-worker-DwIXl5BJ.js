(function(){"use strict";const z=Symbol("Comlink.proxy"),J=Symbol("Comlink.endpoint"),Q=Symbol("Comlink.releaseProxy"),C=Symbol("Comlink.finalizer"),T=Symbol("Comlink.thrown"),L=e=>typeof e=="object"&&e!==null||typeof e=="function",Z={canHandle:e=>L(e)&&e[z],serialize(e){const{port1:n,port2:t}=new MessageChannel;return D(e,n),[t,[t]]},deserialize(e){return e.start(),re(e)}},ee={canHandle:e=>L(e)&&T in e,serialize({value:e}){let n;return e instanceof Error?n={isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:n={isError:!1,value:e},[n,[]]},deserialize(e){throw e.isError?Object.assign(new Error(e.value.message),e.value):e.value}},V=new Map([["proxy",Z],["throw",ee]]);function te(e,n){for(const t of e)if(n===t||t==="*"||t instanceof RegExp&&t.test(n))return!0;return!1}function D(e,n=globalThis,t=["*"]){n.addEventListener("message",function r(s){if(!s||!s.data)return;if(!te(t,s.origin)){console.warn(`Invalid origin '${s.origin}' for comlink proxy`);return}const{id:o,type:c,path:a}=Object.assign({path:[]},s.data),u=(s.data.argumentList||[]).map(w);let f;try{const _=a.slice(0,-1).reduce((l,M)=>l[M],e),g=a.reduce((l,M)=>l[M],e);switch(c){case"GET":f=g;break;case"SET":_[a.slice(-1)[0]]=w(s.data.value),f=!0;break;case"APPLY":f=g.apply(_,u);break;case"CONSTRUCT":{const l=new g(...u);f=ae(l)}break;case"ENDPOINT":{const{port1:l,port2:M}=new MessageChannel;D(e,M),f=ce(l,[l])}break;case"RELEASE":f=void 0;break;default:return}}catch(_){f={value:_,[T]:0}}Promise.resolve(f).catch(_=>({value:_,[T]:0})).then(_=>{const[g,l]=O(_);n.postMessage(Object.assign(Object.assign({},g),{id:o}),l),c==="RELEASE"&&(n.removeEventListener("message",r),H(n),C in e&&typeof e[C]=="function"&&e[C]())}).catch(_=>{const[g,l]=O({value:new TypeError("Unserializable return value"),[T]:0});n.postMessage(Object.assign(Object.assign({},g),{id:o}),l)})}),n.start&&n.start()}function ne(e){return e.constructor.name==="MessagePort"}function H(e){ne(e)&&e.close()}function re(e,n){const t=new Map;return e.addEventListener("message",function(s){const{data:o}=s;if(!o||!o.id)return;const c=t.get(o.id);if(c)try{c(o)}finally{t.delete(o.id)}}),I(e,t,[],n)}function R(e){if(e)throw new Error("Proxy has been released and is not useable")}function $(e){return y(e,new Map,{type:"RELEASE"}).then(()=>{H(e)})}const k=new WeakMap,F="FinalizationRegistry"in globalThis&&new FinalizationRegistry(e=>{const n=(k.get(e)||0)-1;k.set(e,n),n===0&&$(e)});function se(e,n){const t=(k.get(n)||0)+1;k.set(n,t),F&&F.register(e,n,e)}function oe(e){F&&F.unregister(e)}function I(e,n,t=[],r=function(){}){let s=!1;const o=new Proxy(r,{get(c,a){if(R(s),a===Q)return()=>{oe(o),$(e),n.clear(),s=!0};if(a==="then"){if(t.length===0)return{then:()=>o};const u=y(e,n,{type:"GET",path:t.map(f=>f.toString())}).then(w);return u.then.bind(u)}return I(e,n,[...t,a])},set(c,a,u){R(s);const[f,_]=O(u);return y(e,n,{type:"SET",path:[...t,a].map(g=>g.toString()),value:f},_).then(w)},apply(c,a,u){R(s);const f=t[t.length-1];if(f===J)return y(e,n,{type:"ENDPOINT"}).then(w);if(f==="bind")return I(e,n,t.slice(0,-1));const[_,g]=B(u);return y(e,n,{type:"APPLY",path:t.map(l=>l.toString()),argumentList:_},g).then(w)},construct(c,a){R(s);const[u,f]=B(a);return y(e,n,{type:"CONSTRUCT",path:t.map(_=>_.toString()),argumentList:u},f).then(w)}});return se(o,e),o}function ie(e){return Array.prototype.concat.apply([],e)}function B(e){const n=e.map(O);return[n.map(t=>t[0]),ie(n.map(t=>t[1]))]}const q=new WeakMap;function ce(e,n){return q.set(e,n),e}function ae(e){return Object.assign(e,{[z]:!0})}function O(e){for(const[n,t]of V)if(t.canHandle(e)){const[r,s]=t.serialize(e);return[{type:"HANDLER",name:n,value:r},s]}return[{type:"RAW",value:e},q.get(e)||[]]}function w(e){switch(e.type){case"HANDLER":return V.get(e.name).deserialize(e.value);case"RAW":return e.value}}function y(e,n,t,r){return new Promise(s=>{const o=ue();n.set(o,s),e.start&&e.start(),e.postMessage(Object.assign({id:o},t),r)})}function ue(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}let i;function fe(e){const n=i.__externref_table_alloc();return i.__wbindgen_externrefs.set(n,e),n}function j(e){const n=typeof e;if(n=="number"||n=="boolean"||e==null)return`${e}`;if(n=="string")return`"${e}"`;if(n=="symbol"){const s=e.description;return s==null?"Symbol":`Symbol(${s})`}if(n=="function"){const s=e.name;return typeof s=="string"&&s.length>0?`Function(${s})`:"Function"}if(Array.isArray(e)){const s=e.length;let o="[";s>0&&(o+=j(e[0]));for(let c=1;c<s;c++)o+=", "+j(e[c]);return o+="]",o}const t=/\[object ([^\]]+)\]/.exec(toString.call(e));let r;if(t&&t.length>1)r=t[1];else return toString.call(e);if(r=="Object")try{return"Object("+JSON.stringify(e)+")"}catch{return"Object"}return e instanceof Error?`${e.name}: ${e.message}
${e.stack}`:r}function Y(e,n){return e=e>>>0,G().subarray(e/4,e/4+n)}function _e(e,n){e=e>>>0;const t=d(),r=[];for(let s=e;s<e+4*n;s+=4)r.push(i.__wbindgen_externrefs.get(t.getUint32(s,!0)));return i.__externref_drop_slice(e,n),r}function le(e,n){return e=e>>>0,m().subarray(e/1,e/1+n)}let h=null;function d(){return(h===null||h.buffer!==i.memory.buffer)&&(h=new DataView(i.memory.buffer)),h}let p=null;function G(){return(p===null||p.buffer!==i.memory.buffer)&&(p=new Float32Array(i.memory.buffer)),p}function W(e,n){return e=e>>>0,ye(e,n)}let E=null;function m(){return(E===null||E.buffer!==i.memory.buffer)&&(E=new Uint8Array(i.memory.buffer)),E}function be(e,n){try{return e.apply(this,n)}catch(t){const r=fe(t);i.__wbindgen_exn_store(r)}}function P(e){return e==null}function K(e,n){const t=n(e.length*1,1)>>>0;return m().set(e,t/1),b=e.length,t}function ge(e,n){const t=n(e.length*4,4)>>>0;return G().set(e,t/4),b=e.length,t}function A(e,n,t){if(t===void 0){const a=S.encode(e),u=n(a.length,1)>>>0;return m().subarray(u,u+a.length).set(a),b=a.length,u}let r=e.length,s=n(r,1)>>>0;const o=m();let c=0;for(;c<r;c++){const a=e.charCodeAt(c);if(a>127)break;o[s+c]=a}if(c!==r){c!==0&&(e=e.slice(c)),s=t(s,r,r=c+e.length*3,1)>>>0;const a=m().subarray(s+c,s+r),u=S.encodeInto(e,a);c+=u.written,s=t(s,r,c,1)>>>0}return b=c,s}function de(e){const n=i.__wbindgen_externrefs.get(e);return i.__externref_table_dealloc(e),n}let x=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):void 0;x&&x.decode();const we=2146435072;let U=0;function ye(e,n){return U+=n,U>=we&&(x=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}),x.decode(),U=n),x.decode(m().slice(e,e+n))}const S=typeof TextEncoder<"u"?new TextEncoder:void 0;S&&(S.encodeInto=function(e,n){const t=S.encode(e);return n.set(t),{read:e.length,written:t.length}});let b=0;const X=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(e=>i.__wbg_module_free(e>>>0,1));class N{__destroy_into_raw(){const n=this.__wbg_ptr;return this.__wbg_ptr=0,X.unregister(this),n}free(){const n=this.__destroy_into_raw();i.__wbg_module_free(n,0)}find_route(n,t,r){const s=i.module_find_route(this.__wbg_ptr,n,t,r);if(s[3])throw de(s[2]);var o=Y(s[0],s[1]).slice();return i.__wbindgen_free(s[0],s[1]*4,4),o}set_kdtree(n){const t=K(n,i.__wbindgen_malloc),r=b;i.module_set_kdtree(this.__wbg_ptr,t,r)}suggest_words(n,t){const r=A(n,i.__wbindgen_malloc,i.__wbindgen_realloc),s=b,o=i.module_suggest_words(this.__wbg_ptr,r,s,t);var c=_e(o[0],o[1]).slice();return i.__wbindgen_free(o[0],o[1]*4,4),c}get_coords_for_star(n){const t=A(n,i.__wbindgen_malloc,i.__wbindgen_realloc),r=b;return i.module_get_coords_for_star(this.__wbg_ptr,t,r)}constructor(){const n=i.module_new();return this.__wbg_ptr=n>>>0,X.register(this,this.__wbg_ptr,this),this}set_trie(n){const t=K(n,i.__wbindgen_malloc),r=b;i.module_set_trie(this.__wbg_ptr,t,r)}set_stars(n){const t=ge(n,i.__wbindgen_malloc),r=b;i.module_set_stars(this.__wbg_ptr,t,r)}}Symbol.dispose&&(N.prototype[Symbol.dispose]=N.prototype.free);const me=new Set(["basic","cors","default"]);async function he(e,n){if(typeof Response=="function"&&e instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(e,n)}catch(r){if(e.ok&&me.has(e.type)&&e.headers.get("Content-Type")!=="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",r);else throw r}const t=await e.arrayBuffer();return await WebAssembly.instantiate(t,n)}else{const t=await WebAssembly.instantiate(e,n);return t instanceof WebAssembly.Instance?{instance:t,module:e}:t}}function pe(e){const n={};return n.wbg={},n.wbg.__wbg_Error_52673b7de5a0ca89=function(t,r){return Error(W(t,r))},n.wbg.__wbg_String_8f0eb39a4a4c2f66=function(t,r){const s=String(r),o=A(s,i.__wbindgen_malloc,i.__wbindgen_realloc),c=b;d().setInt32(t+4,c,!0),d().setInt32(t+0,o,!0)},n.wbg.__wbg___wbindgen_boolean_get_dea25b33882b895b=function(t){const r=t,s=typeof r=="boolean"?r:void 0;return P(s)?16777215:s?1:0},n.wbg.__wbg___wbindgen_debug_string_adfb662ae34724b6=function(t,r){const s=j(r),o=A(s,i.__wbindgen_malloc,i.__wbindgen_realloc),c=b;d().setInt32(t+4,c,!0),d().setInt32(t+0,o,!0)},n.wbg.__wbg___wbindgen_in_0d3e1e8f0c669317=function(t,r){return t in r},n.wbg.__wbg___wbindgen_is_object_ce774f3490692386=function(t){const r=t;return typeof r=="object"&&r!==null},n.wbg.__wbg___wbindgen_is_undefined_f6b95eab589e0269=function(t){return t===void 0},n.wbg.__wbg___wbindgen_jsval_loose_eq_766057600fdd1b0d=function(t,r){return t==r},n.wbg.__wbg___wbindgen_number_get_9619185a74197f95=function(t,r){const s=r,o=typeof s=="number"?s:void 0;d().setFloat64(t+8,P(o)?0:o,!0),d().setInt32(t+0,!P(o),!0)},n.wbg.__wbg___wbindgen_string_get_a2a31e16edf96e42=function(t,r){const s=r,o=typeof s=="string"?s:void 0;var c=P(o)?0:A(o,i.__wbindgen_malloc,i.__wbindgen_realloc),a=b;d().setInt32(t+4,a,!0),d().setInt32(t+0,c,!0)},n.wbg.__wbg___wbindgen_throw_dd24417ed36fc46e=function(t,r){throw new Error(W(t,r))},n.wbg.__wbg_call_78f94eb02ec7f9b2=function(){return be(function(t,r,s,o,c){return t.call(r,s,o,c)},arguments)},n.wbg.__wbg_get_with_ref_key_1dc361bd10053bfe=function(t,r){return t[r]},n.wbg.__wbg_instanceof_ArrayBuffer_f3320d2419cd0355=function(t){let r;try{r=t instanceof ArrayBuffer}catch{r=!1}return r},n.wbg.__wbg_instanceof_Uint8Array_da54ccc9d3e09434=function(t){let r;try{r=t instanceof Uint8Array}catch{r=!1}return r},n.wbg.__wbg_length_22ac23eaec9d8053=function(t){return t.length},n.wbg.__wbg_log_6acb74550e7c0c54=function(t,r){console.log(W(t,r))},n.wbg.__wbg_new_1ba21ce319a06297=function(){return new Object},n.wbg.__wbg_new_6421f6084cc5bc5a=function(t){return new Uint8Array(t)},n.wbg.__wbg_prototypesetcall_dfe9b766cdc1f1fd=function(t,r,s){Uint8Array.prototype.set.call(le(t,r),s)},n.wbg.__wbg_set_3f1d0b984ed272ed=function(t,r,s){t[r]=s},n.wbg.__wbindgen_cast_2241b6af4c4b2941=function(t,r){return W(t,r)},n.wbg.__wbindgen_cast_38bab93e5e373874=function(t,r){var s=Y(t,r).slice();return i.__wbindgen_free(t,r*4,4),s},n.wbg.__wbindgen_cast_d6cd19b81560fd6e=function(t){return t},n.wbg.__wbindgen_init_externref_table=function(){const t=i.__wbindgen_externrefs,r=t.grow(4);t.set(0,void 0),t.set(r+0,void 0),t.set(r+1,null),t.set(r+2,!0),t.set(r+3,!1)},n.wbg.memory=e||new WebAssembly.Memory({initial:18,maximum:16384,shared:!0}),n}function Ee(e,n,t){if(i=e.exports,v.__wbindgen_wasm_module=n,h=null,p=null,E=null,typeof t<"u"&&(typeof t!="number"||t===0||t%65536!==0))throw"invalid stack size";return i.__wbindgen_start(t),i}async function v(e,n){if(i!==void 0)return i;let t;typeof e<"u"&&(Object.getPrototypeOf(e)===Object.prototype?{module_or_path:e,memory:n,thread_stack_size:t}=e:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),typeof e>"u"&&(e=new URL("/assets/rust_module_bg-Dgnr2KQs.wasm",self.location.href));const r=pe(n);(typeof e=="string"||typeof Request=="function"&&e instanceof Request||typeof URL=="function"&&e instanceof URL)&&(e=fetch(e));const{instance:s,module:o}=await he(await e,r);return Ee(s,o,t)}class Ae{wasmModule;constructor(){v().then(()=>{this.wasmModule=new N})}findRoute(n,t,r){return this.wasmModule.find_route(n,t,(s,o,c)=>{r(s,o,c)})}setStars(n){this.wasmModule.set_stars(n),console.log("Wasm worker: Stars data set.")}setKDTree(n){this.wasmModule.set_kdtree(n),console.log("Wasm worker: KDTree data set.")}}D(Ae)})();
